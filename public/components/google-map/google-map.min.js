function _instanceof(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutProperties(e,t){if(null==e)return{};var r,o,n=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}function SimpleGoogleMap(e){return node=e.node,markers=e.markers,params=_objectWithoutProperties(e,["node","markers"]),node.simpleGoogleMap=this,this.node=node,this.markers=markers,this.params=params,this.geocoder=new google.maps.Geocoder,"string"==typeof this.params.center?(this.map=new google.maps.Map(this.node,_objectSpread(_objectSpread({},this.params),{},{center:{lat:0,lng:0}})),this.setCenter(this.params.center)):this.map=new google.maps.Map(this.node,this.params),this.procMarkers(),this}SimpleGoogleMap.prototype.setCenter=function(e){this.getPosition(e,function(e){this.params.center=e,this.map.setCenter(this.params.center)}.bind(this))},SimpleGoogleMap.prototype.procMarkers=function(){var e=this;if(_instanceof(this.markers,Object)&&Object.getOwnPropertyNames(this.markers).length>0){var t=function(t){var r=e.markers[t];"string"==typeof r.position?e.getPosition(r.position,function(e){r.position=e,this.setMarker(t)}.bind(e)):e.setMarker(t)};for(var r in this.markers)t(r)}},SimpleGoogleMap.prototype.setMarker=function(e){var t=this.markers[e];t.instance=new google.maps.Marker(_objectSpread({map:this.map},t)),t.html&&(t.info=new google.maps.InfoWindow({content:t.html}),t.instance.addListener("click",function(){for(var e in this.markers)"undefined"!=typeof this.markers[e].info&&this.markers[e].info.close();t.info.open(this.map,t.instance)}.bind(this)))},SimpleGoogleMap.prototype.addMarker=function(e,t){var r=this.markers[e]=t;"string"==typeof r.position?this.getPosition(r.position,function(t){r.position=t,this.setMarker(e)}.bind(this)):this.setMarker(e)},SimpleGoogleMap.prototype.delMarker=function(e){this.markers[e].instance.setMap(null),delete this.markers[e]},SimpleGoogleMap.prototype.hideMarker=function(e){this.markers[e].instance.setMap(null)},SimpleGoogleMap.prototype.showMarker=function(e){this.markers[e].instance.setMap(this.map)},SimpleGoogleMap.prototype.getPosition=function(e,t){this.geocoder.geocode({address:e},function(r,o){"OK"===o?t(r[0].geometry.location):"OVER_QUERY_LIMIT"===o?setTimeout(this.getPosition.bind(this,e,t),1e3):console.warn(o,e)}.bind(this))},SimpleGoogleMap.prototype.showInfo=function(e){for(var t in this.markers)"undefined"!=typeof this.markers[t].info&&this.markers[t].info.close();"undefined"!=typeof this.markers[e]&&this.markers[e].info.open(this.map,this.markers[e].instance)},SimpleGoogleMap.prototype.search=function(e){for(var t in this.markers)this.delMarker(t);this.getPosition(e,function(t){this.map.setCenter(t),this.addMarker(e,{position:t})}.bind(this))},SimpleGoogleMap.prototype.filter=function(e){var t=Object.getOwnPropertyNames(this.markers),r=[];r=e.includes("*")?t:t.filter(function(t){for(var r=this.markers[t],o=0;o<r.tags.length;o++)if(e.includes(r.tags[o]))return!0;return!1}.bind(this));for(var o in this.markers)r.includes(o)?this.showMarker(o):this.hideMarker(o)};